name: üèó Build

on: workflow_call

jobs:
  build:
    name: Build ${{ matrix.version}}
    strategy:
      matrix:
        version: [11, 12]
    runs-on: macos-${{ matrix.version}}
    steps:
      - uses: actions/checkout@v3
        with:
          os-version: ${{ matrix.version }}

  test:
    name: Test ${{ matrix.version}}
    if: always()
    needs: build
    strategy:
      matrix:
        version: [11, 12]
    runs-on: macos-${{ matrix.version}}
    steps:
      - name: test if
        if: matrix.version == 12
        run: echo "we're on 12"

      - name: Fail 11
        if: matrix.version == 11
        run: exit 1

      - uses: actions/checkout@v3
        with:
          os-version: ${{ matrix.version }}
